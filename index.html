<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acta de Calificaci√≥n - Juegos Deportivos del Principado de Asturias</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-logos">
                <div class="logo-left">DEPORTE ASTURIANU</div>
                <div class="logo-right">juegos deportivos<br>PRINCIPADO DE ASTURIAS</div>
            </div>
            <h1>ACTA DE CALIFICACI√ìN / JUEGOS DEPORTIVOS DEL PRINCIPADO DE ASTURIAS</h1>
            
            <!-- Bot√≥n de sincronizaci√≥n con Google Sheets -->
            <div class="sync-controls">
                <button id="btnGoogleAuth" class="btn-sync">üîê Conectar con Google</button>
                <button id="btnSync" class="btn-sync hidden">üîÑ Sincronizar</button>
                <button id="btnSignOut" class="btn-sync hidden">üö™ Cerrar Sesi√≥n</button>
                <span id="syncStatus" class="sync-status"></span>
            </div>
        </header>

        <!-- Vista de Administraci√≥n -->
        <div id="adminView" class="view">
            <div class="admin-header">
                <h2>Panel de Administraci√≥n</h2>
                <button id="showMatchFormBtn" class="btn-primary">+ Crear Nuevo Partido</button>
            </div>

            <div id="matchFormSection" class="hidden">
                <h3>Crear Nuevo Partido</h3>
                <form id="createMatchForm">
                    <div class="form-grid">
                        <div class="form-field">
                            <label>Modalidad Deportiva:</label>
                            <input type="text" id="modalidad" value="Voleibol" readonly>
                        </div>
                        
                        <div class="form-field">
                            <label>Categor√≠a: *</label>
                            <select id="categoria" required>
                                <option value="">Seleccionar...</option>
                                <option value="Cadete">Cadete</option>
                                <option value="Infantil">Infantil</option>
                                <option value="Alevin">Alev√≠n</option>
                                <option value="Benjamin">Benjam√≠n</option>
                                <option value="Minibenjamin">Minibenjam√≠n</option>
                            </select>
                        </div>

                        <div class="form-field">
                            <label>Sexo: *</label>
                            <select id="sexo" required>
                                <option value="">Seleccionar...</option>
                                <option value="Masculino">Masculino</option>
                                <option value="Femenino">Femenino</option>
                                <option value="Mixto">Mixto</option>
                            </select>
                        </div>

                        <div class="form-field">
                            <label>Grupo: *</label>
                            <select id="grupo" required>
                                <option value="">Seleccionar...</option>
                                <option value="Unico">√önico</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                            </select>
                        </div>

                        <div class="form-field">
                            <label>Fecha del Partido: *</label>
                            <input type="date" id="fechaPartido" required>
                        </div>

                        <div class="form-field">
                            <label>Hora del Partido: *</label>
                            <input type="time" id="horaPartido" required>
                        </div>

                        <div class="form-field">
                            <label>Lugar de Celebraci√≥n: *</label>
                            <input type="text" id="lugar" placeholder="Ej: Polideportivo Municipal" required>
                        </div>

                        <div class="form-field">
                            <label>Equipo Local: *</label>
                            <input type="text" id="equipoLocal" placeholder="Nombre del equipo local" required>
                        </div>

                        <div class="form-field">
                            <label>Equipo Visitante: *</label>
                            <input type="text" id="equipoVisitante" placeholder="Nombre del equipo visitante" required>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn-submit">Crear Partido</button>
                        <button type="button" id="cancelMatchBtn" class="btn-secondary">Cancelar</button>
                    </div>
                </form>
            </div>

            <div id="matchesListSection">
                <h3>Partidos Registrados</h3>
                <div id="matchesList" class="matches-list"></div>
            </div>
        </div>

        <!-- Vista de Selecci√≥n de Partido (para equipos) -->
        <div id="selectMatchView" class="view hidden">
            <h2>Identificar Partido</h2>
            <p class="info-text">Selecciona tu partido para completar el acta de calificaci√≥n</p>
            
            <div class="form-grid">
                <div class="form-field">
                    <label>Categor√≠a:</label>
                    <select id="filterCategoria">
                        <option value="">Todas</option>
                        <option value="Cadete">Cadete</option>
                        <option value="Infantil">Infantil</option>
                        <option value="Alevin">Alev√≠n</option>
                        <option value="Benjamin">Benjam√≠n</option>
                        <option value="Minibenjamin">Minibenjam√≠n</option>
                    </select>
                </div>

                <div class="form-field">
                    <label>Sexo:</label>
                    <select id="filterSexo">
                        <option value="">Todos</option>
                        <option value="Masculino">Masculino</option>
                        <option value="Femenino">Femenino</option>
                        <option value="Mixto">Mixto</option>
                    </select>
                </div>

                <div class="form-field">
                    <label>Grupo:</label>
                    <select id="filterGrupo">
                        <option value="">Todos</option>
                        <option value="Unico">√önico</option>
                        <option value="A">A</option>
                        <option value="B">B</option>
                        <option value="C">C</option>
                        <option value="D">D</option>
                        <option value="E">E</option>
                        <option value="F">F</option>
                    </select>
                </div>

                <div class="form-field">
                    <label>Fecha:</label>
                    <input type="date" id="filterFecha">
                </div>
            </div>

            <div id="availableMatchesList" class="matches-list"></div>
        </div>

        <!-- Vista de Formulario de Evaluaci√≥n -->
        <div id="evaluationView" class="view hidden">
            <div id="matchInfo" class="match-info"></div>

            <form id="scoringForm">
            <div class="evaluation-header">
                <h2>MI EQUIPO: <span id="miEquipo"></span></h2>
                <h3>Evaluando a: <span id="equipoContrario"></span></h3>
            </div>

            <div class="resultado-section">
                <h3>Resultado del Partido</h3>
                <div class="resultado-inputs">
                    <div class="resultado-field">
                        <label id="labelMiEquipo"></label>
                        <input type="number" id="setsGanados" min="0" max="3" value="0" required>
                    </div>
                    <span class="vs">-</span>
                    <div class="resultado-field">
                        <label id="labelEquipoContrario"></label>
                        <input type="number" id="setsContrario" min="0" max="3" value="0" required>
                    </div>
                </div>
            </div>

            <div class="team-section">

                    <div class="scoring-section">
                        <h3>1. ENTRENADOR/A CONTRARIO/A</h3>
                        <div class="scoring-item">
                            <label>
                                <input type="radio" name="entrenador" value="0" required>
                                <span class="score-badge red">0</span>
                                Conducta antideportiva (protestas constantes, faltas de respeto, incitaci√≥n a la tensi√≥n).
                            </label>
                        </div>
                        <div class="scoring-item">
                            <label>
                                <input type="radio" name="entrenador" value="1">
                                <span class="score-badge orange">1</span>
                                Actitud negativa frecuente, poco colaborativa.
                            </label>
                        </div>
                        <div class="scoring-item">
                            <label>
                                <input type="radio" name="entrenador" value="2">
                                <span class="score-badge yellow">2</span>
                                Actitud correcta en general, aunque con momentos de tensi√≥n.
                            </label>
                        </div>
                        <div class="scoring-item">
                            <label>
                                <input type="radio" name="entrenador" value="3">
                                <span class="score-badge light-green">3</span>
                                Actitud positiva, respeta las decisiones arbitrales y fomenta el juego limpio.
                            </label>
                        </div>
                        <div class="scoring-item">
                            <label>
                                <input type="radio" name="entrenador" value="4">
                                <span class="score-badge green">4</span>
                                Ejemplo de deportividad: colaboraci√≥n, respeto total, facilita el desarrollo del partido.
                            </label>
                        </div>
                    </div>

                    <div class="scoring-section">
                        <h3>2. DEPORTISTAS EQUIPO CONTRARIO</h3>
                        <div class="scoring-item">
                            <label>
                                <input type="radio" name="deportistas" value="0" required>
                                <span class="score-badge red">0</span>
                                Conducta violenta o antideportiva reiterada.
                            </label>
                        </div>
                        <div class="scoring-item">
                            <label>
                                <input type="radio" name="deportistas" value="1">
                                <span class="score-badge orange">1</span>
                                Incidentes frecuentes (provocaciones, malas actitudes, protestas al √°rbitro/a).
                            </label>
                        </div>
                        <div class="scoring-item">
                            <label>
                                <input type="radio" name="deportistas" value="2">
                                <span class="score-badge yellow">2</span>
                                Comportamiento aceptable con algunas acciones negativas aisladas.
                            </label>
                        </div>
                        <div class="scoring-item">
                            <label>
                                <input type="radio" name="deportistas" value="3">
                                <span class="score-badge light-green">3</span>
                                Buen comportamiento, respeto entre rivales, pocas incidencias.
                            </label>
                        </div>
                        <div class="scoring-item">
                            <label>
                                <input type="radio" name="deportistas" value="4">
                                <span class="score-badge green">4</span>
                                Ejemplo de juego limpio: cooperaci√≥n, respeto total a compa√±eros/as, rivales y √°rbitro.
                            </label>
                        </div>
                    </div>

                    <div class="scoring-section">
                        <h3>3. √ÅRBITRO/A</h3>
                        <div class="scoring-item">
                            <label>
                                <input type="radio" name="arbitro" value="0" required>
                                <span class="score-badge red">0</span>
                                Parcialidad clara, falta de control del partido.
                            </label>
                        </div>
                        <div class="scoring-item">
                            <label>
                                <input type="radio" name="arbitro" value="1">
                                <span class="score-badge orange">1</span>
                                Errores graves o repetidos, actitud poco dialogante.
                            </label>
                        </div>
                        <div class="scoring-item">
                            <label>
                                <input type="radio" name="arbitro" value="2">
                                <span class="score-badge yellow">2</span>
                                Actuaci√≥n correcta con errores puntuales.
                            </label>
                        </div>
                        <div class="scoring-item">
                            <label>
                                <input type="radio" name="arbitro" value="3">
                                <span class="score-badge light-green">3</span>
                                Buen arbitraje, comunicaci√≥n clara, mantiene el control.
                            </label>
                        </div>
                        <div class="scoring-item">
                            <label>
                                <input type="radio" name="arbitro" value="4">
                                <span class="score-badge green">4</span>
                                Excelente: imparcial, firme, dialogante y respetuoso/a.
                            </label>
                        </div>
                    </div>

                    <div class="scoring-section">
                        <h3>4. CONDUCTA DE LA AFICI√ìN</h3>
                        <div class="scoring-item">
                            <label>
                                <input type="radio" name="aficion" value="0" required>
                                <span class="score-badge red">0</span>
                                Conducta inaceptable (insultos, agresiones verbales o f√≠sicas, violencia).
                            </label>
                        </div>
                        <div class="scoring-item">
                            <label>
                                <input type="radio" name="aficion" value="1">
                                <span class="score-badge orange">1</span>
                                Comportamiento negativo frecuente (protestas continuas, ambiente hostil).
                            </label>
                        </div>
                        <div class="scoring-item">
                            <label>
                                <input type="radio" name="aficion" value="2">
                                <span class="score-badge yellow">2</span>
                                Conducta aceptable, aunque con momentos de tensi√≥n.
                            </label>
                        </div>
                        <div class="scoring-item">
                            <label>
                                <input type="radio" name="aficion" value="3">
                                <span class="score-badge light-green">3</span>
                                Buena actitud, apoyo mayormente positivo.
                            </label>
                        </div>
                        <div class="scoring-item">
                            <label>
                                <input type="radio" name="aficion" value="4">
                                <span class="score-badge green">4</span>
                                Ejemplo de deportividad: √°nimos constantes, respeto al rival y √°rbitro/a.
                            </label>
                        </div>
                    </div>

                    <div class="total-box">
                        <label>TOTAL PUNTOS</label>
                        <div class="total-score" id="totalPuntos">0</div>
                    </div>

                    <div class="signature-box">
                        <label>Firma del Responsable del Equipo:</label>
                        <input type="text" id="firma" placeholder="Nombre del Entrenador/a" required>
                    </div>
                </div>

            <div class="deadline-warning">
                ‚ö†Ô∏è IMPORTANTE: Este formulario debe ser completado antes del <strong>lunes siguiente a las 12:00 horas</strong> tras la finalizaci√≥n del partido.
            </div>

            <div class="form-actions">
                <button type="submit" class="btn-submit">Guardar y Enviar Evaluaci√≥n</button>
                <button type="button" class="btn-secondary" id="cancelEvaluationBtn">Cancelar</button>
            </div>
        </form>
        </div>

        <div id="submissionMessage" class="submission-message hidden">
            ‚úì Evaluaci√≥n enviada correctamente
        </div>

        <!-- Navegaci√≥n Principal -->
        <div id="mainNav" class="main-nav">
            <button id="btnAdmin" class="nav-btn">Panel de Administraci√≥n</button>
            <button id="btnTeam" class="nav-btn">Completar Acta (Equipos)</button>
            <button id="btnResults" class="nav-btn">Ver Resultados</button>
        </div>

        <!-- Vista de Resultados -->
        <div id="resultsView" class="view hidden">
            <h2>Resultados y Actas Completadas</h2>
            <div class="form-grid">
                <div class="form-field">
                    <label>Filtrar por Categor√≠a:</label>
                    <select id="resultsFilterCategoria">
                        <option value="">Todas</option>
                        <option value="Cadete">Cadete</option>
                        <option value="Infantil">Infantil</option>
                        <option value="Alevin">Alev√≠n</option>
                        <option value="Benjamin">Benjam√≠n</option>
                        <option value="Minibenjamin">Minibenjam√≠n</option>
                    </select>
                </div>
            </div>
            <div id="resultsList" class="results-list"></div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <!-- Configuraci√≥n y Scripts -->
    <script src="firebaseConfig.js"></script>
    <script src="firestoreService.js"></script>
    <script src="script.js"></script>
</body>
</html>
